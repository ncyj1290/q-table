<html xmlns:th="http://www.thymeleaf.org">

<body>
   <div th:fragment="HeaderFragment">
	  <link rel="stylesheet" th:href="@{/css/header.css}">
	  <script th:src="@{/js/common/header.js}"></script>	  
      <header class="header">
         <!-- 로고 -->
         <a th:href="@{/}">
            <img th:src="@{/img/logo.PNG}" alt="로고">
         </a>
         <!-- 검색창 -->
         <th:block th:if="${isSearch}">
            <div class="search-box">
               <input type="text" placeholder="검색어를 입력하세요">
               <div class="date-area">
                  <span class="seperator">|</span>
                  <span class="date">12.21(일)</span>
                  <span class="time">14:00</span>
                  <span class="person-count">0</span>명
               </div>
               <a href="/search" class="search-btn">
                  <i class="fas fa-search"></i>
               </a>
            </div>
         </th:block>
<!--          <th:block th:unless="${isSearch}"> -->
            <div class="search-box">
               <input type="text" placeholder="검색어를 입력하세요">
               <a href="/search" class="search-btn">
                  <i class="fas fa-search"></i>
               </a>
            </div>
<!--          </th:block> -->
             <!-- 로그인 상태: 아이콘만 표시 -->
             <div sec:authorize="isAuthenticated()">
                 <div class="menu-icons">
                     <a th:href="@{/#}"><img th:src="@{/img/header_month.png}" alt="달력"></a>
                     <a th:href="@{/chat}"><img th:src="@{/img/header_messenger.png}" alt="메신저"></a>
					 <!-- 프로필 드롭다운 -->
					 <div class="profile-dropdown">
					     <img th:src="@{/img/header_profile.png}" alt="프로필" class="profile-icon">
					     <div class="dropdown-menu">
					         <!-- 프로필 정보 -->
					         <div class="header-profile-info" onclick="location.href='/mypage_main'">
								<img src="/img/profile.png" alt="프로필 사진" class="header-profile-img">
					             <div class="user-details">
					                 <div class="user-name">000님</div>
					                 <div class="user-email">123456@naver.com</div>
					             </div>
					         </div>

					         <!-- 메뉴 항목 -->
					         <a th:href="@{/profile_settings}">프로필 편집</a>
					         <a th:href="@{/reservation_list}">예약현황</a>
					         <a th:href="@{/mypage_history}">방문내역</a>
					         <a th:href="@{/mypage_scrap}">스크랩가게</a>
					         

					         <!-- 로그아웃 강조 -->
							 <form action="/logout" method="post">
								<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
							     <button type="submit" class="logout">로그아웃</button>
							 </form>
					     </div>
					 </div>
                 </div>
             </div>

             <!-- 비로그인 상태 -->
             <div sec:authorize="isAnonymous()">
               <div class="loginoff">
                 <a th:href="@{/login}">로그인/등록</a>
               </div>
             </div>
      </header>
      <div class="horizontal-line" style="max-width: 1400px; margin: 10 auto 10 auto;">
      </div>
   </div>

</body>
</html>