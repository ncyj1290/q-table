<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layouts/defaultLayout}">

<head>
	<link rel="stylesheet" th:href="@{/css/mypage/mypageNav.css}">
	<link rel="stylesheet" th:href="@{/css/mypage/profile.css}">
	<link rel="stylesheet" th:href="@{/css/mypage/mypageMain.css}">
	<link rel="stylesheet" th:href="@{/css/mypage/pick.css}">
	<link rel="stylesheet" th:href="@{/css/mypage/mypageHistory.css}">
	<link rel="stylesheet" th:href="@{/css/mypage/mypageCalendar.css}">
			<link rel="stylesheet" th:href="@{/css/storeDetail/storeDetail.css}">
	<script th:src="@{/js/mypage/pick.js}" defer></script>
	<script th:src="@{/js/mypage/mypage_button.js}" defer></script>
	<script th:src="@{/js/mypage/profile.js}" defer></script>
	<script th:src="@{/js/mypage/mypage_main.js}" defer></script>
	<script th:src="@{/js/mypage/mypageReview.js}" defer></script>
	<script th:src="@{/js/storeDetail/review.js}" defer></script>
	<script th:src="@{/js/common/pagination.js}"></script>
		<script th:src="@{/js/storeDetail/dynamicCalendar.js}"></script>
	<meta charset="UTF-8">
	<title>history</title>
</head>
<body>
	<div layout:fragment="Content">
		<div th:replace="mypage/profile :: mainnav"></div>
		<div th:replace="mypage/mypageNav :: mainnav"></div>
		<div th:replace="~{storeDetail/fragments/reviewModal :: reviewModal}"></div>
		<div style="display: flex; align-items: center;">
			<img src="/img/spoon.png" class="spoon-icon" alt="스푼 아이콘" />
			<span class="history-label">방문 내역</span>
		</div>

		<div id="reservationContent"></div>
					
		<div class="visit-list">
				<div class="reservation-item" th:each="item : ${upcomingList}">
			<div class="visit-item" id="rsrt">
					<img th:src="@{${item.store_img}}" class="store-img" />
					<div class="visit-info">
						<div class="store-title">
							<div class="name-star-group">
								<span th:text="${item.store_name}" class="store-name"></span> <span
									th:text="'★ ' + ${item.avgScore}" class="star"></span>
							</div>
							<img src="/img/scrap.png" class="scrap-icon"
								th:attr="data-store-idx=${item['store_idx']}" />
						</div>
							<span class="desc">매장 번호 | &nbsp;<span class="desc" th:text="${item.store_phone}"></span></span>
							<span class="desc">매장 주소 | &nbsp;<span class="desc" th:text="${item.full_address}"></span></span>
							<span class="desc">예약 시간 | &nbsp;<span class="desc" th:text="${item.reserve_dt}">> </span></span>
						 	<span class="date" th:text="${item.store_content}"></span>
						<div class="visit-buttons">
							<button class="positive-button review" style="margin-right: 10px;" th:data-store-idx="${item.store_idx}">리뷰
								작성</button>
							<button class="positive-button" data-type="rebookBtn" th:data-store-idx="${item.store_idx}">재방문
								하기</button>
						</div>
					</div>
				</div>
			</div>
			
			<div class="reservation-empty-content" th:if="${#lists.isEmpty(upcomingList)}">
				<div class="reserve-text">방문한 매장이 없어요</div>
				<div class="reserve-text">맛집을 찾으러 가볼까요?</div>
					<a th:href="@{/search}">
						<button class="positive-button"
							style="width: 180px; height: 50px; font-size: 25px; border-radius: 10px; justify-content: center; margin-top: 10px;">맛집 찾아보기</button>
					</a>
			</div>
			
<!--			모달영역-->
			<div id="mypage-calendarModal" class="mypage-modal" style="display:none;">
							<div class="mypage-modal-content">
								<span class="close" id="mypage-closeCalendarModal">&times;</span>
								<div id="mypage-calendar-wrapper"
									th:with="holiday=${holiday}, availableTimes=${availableTimes}, storeIdx=${storeIdx}">
									<div th:replace="~{storeDetail/fragments/reservationCalendar :: reservationCalendar}"></div>
								</div>
							</div>
						</div>
			
			<div th:replace="mypage/pick :: mainnav"></div>
		</div>
		
	</div>
</body>

</html>